'use strict';import * as ws from './websocket.js';let should_send_mouse_events = false;// don't send mouse updates more than every 0.05 secondsconst UPDATE_FREQUENCY_MS = 50;let mouse_x, mouse_y;let last_mouse_message_time = 0;let send_mouse_message_timeout = null;function send_mouse_message() {  ws.send_message({    command: 'player_move',    x: mouse_x,    y: mouse_y,  });  last_mouse_message_time = new Date().getTime();  send_mouse_message_timeout = null;}export function on_viewport_mousemove(event) {  // ignore events that occur on drawn objects  if (event.target.id.startsWith('two-')) {    return;  }  mouse_x = event.offsetX / viewport.offsetWidth;  mouse_y = event.offsetY / viewport.offsetHeight;  if (!should_send_mouse_events) {    return;  }  const now = new Date().getTime();  const delta = now - last_mouse_message_time;  if (delta >= UPDATE_FREQUENCY_MS) {    send_mouse_message();  } else if (send_mouse_message_timeout === null) {    send_mouse_message_timeout = setTimeout(send_mouse_message, UPDATE_FREQUENCY_MS - delta);  }}export function enable_mouse_messages(enable) {  should_send_mouse_events = enable;}